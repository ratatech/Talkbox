* C:\Users\rata\Dropbox\Ratatech\projects\ratatech_talkbox\ltspice\talkbox.asc
C1 tone_control_out N010 22pF
R1 tone_control_out N009 1.8k
R3 N009 in 1.8k
R4 N010 N009 22k
R5 N011 N010 9.1k
C3 N012 N011 4.7nF
R6 N012 in {R_TONE}
V2 Vcc 0 11.9
V3 0 Vee 11.9
XU1 0 N010 Vcc Vee tone_control_out OP27
R7 tone_control_out N012 {R_TONE_SUB}
R2 N017 0 {R_VOL}
R8 preamp_out N017 {R_VOL_SUB}
V4 in 0 SINE(0 0.15 1000) AC 1
C2 N016 N018 0.05µF
R9 N018 0 10
C4 power_amp_out N016 250µF
XU3 NC_01 0 N017 0 N016 Vcc NC_02 NC_03 lm386
R10 N013 N013 {R_GAIN}
R11 preamp_out N013 {R_GAIN_SUB}
XU2 N015 N013 Vcc Vee preamp_out OP27
R12 N013 N014 10k
C5 N015 tone_control_out 10µF
R16 0 N015 1000k
C7 N014 0 10µF
R13 N005 N008 {R_TONE}
R14 N002 N005 {R_TONE_SUB}
R15 N008 N001 47k
R17 N002 0 22k
C6 N002 N001 6.8nF
C8 0 N008 10nF
R18 N003 N003 {R_GAIN}
R19 N001 N003 {R_GAIN_SUB}
XU4 N007 N003 Vcc Vee N001 OP27
R20 N003 N004 2k
C9 N007 in 10µF
R21 0 N007 1000k
C10 N004 0 10µF
C11 N006 N005 0.1µF
.options gmin=1e-9
.options abstol=1e-10
.options reltol=0.003
.options cshunt=1e-15
.option  ITL6=100
.ac oct 100 10 30K
.param R_TONE_SUB=10+{R_TONE_MAX}-{R_TONE}
.param R_TONE=8K
.step param R_TONE 10 20K 2K
.param R_GAIN=0.1
.param R_GAIN_SUB=20K-{R_GAIN}+10
;tran 0.010
;.step param R_GAIN 10 20000 2000
* PARAMETERS
* SIMULATION
.param R_VOL=5k
;.step param R_VOL 10 10000 500
.param R_VOL_SUB=10K-{R_VOL}+10
.param R_TONE_MAX=20K
.param R_TONE_STEP=0.1*{R_TONE_MAX}
.lib ADI.lib
.lib C:\Users\rata\Dropbox\Ratatech\projects\ratatech_talkbox\ltspice\libs\lm386.subckt
.backanno
.end
